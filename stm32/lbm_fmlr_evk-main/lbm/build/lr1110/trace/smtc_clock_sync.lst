ARM GAS  /tmp/cceent9q.s 			page 1


   1              		.cpu cortex-m0
   2              		.eabi_attribute 23, 1
   3              		.eabi_attribute 24, 1
   4              		.eabi_attribute 25, 1
   5              		.eabi_attribute 26, 1
   6              		.eabi_attribute 30, 4
   7              		.eabi_attribute 34, 0
   8              		.eabi_attribute 18, 4
   9              		.file	"smtc_clock_sync.c"
  10              		.text
  11              		.section	.text.clock_sync_init,"ax",%progbits
  12              		.align	1
  13              		.global	clock_sync_init
  14              		.arch armv6s-m
  15              		.syntax unified
  16              		.code	16
  17              		.thumb_func
  18              		.fpu softvfp
  20              	clock_sync_init:
  21              		@ args = 0, pretend = 0, frame = 0
  22              		@ frame_needed = 0, uses_anonymous_args = 0
  23 0000 70B5     		push	{r4, r5, r6, lr}
  24 0002 0025     		movs	r5, #0
  25              		@ sp needed
  26 0004 084B     		ldr	r3, .L2
  27 0006 0400     		movs	r4, r0
  28 0008 0570     		strb	r5, [r0]
  29 000a 4561     		str	r5, [r0, #20]
  30 000c 8560     		str	r5, [r0, #8]
  31 000e C560     		str	r5, [r0, #12]
  32 0010 4360     		str	r3, [r0, #4]
  33 0012 0E00     		movs	r6, r1
  34 0014 FFF7FEFF 		bl	get_modem_dm_port
  35 0018 631C     		adds	r3, r4, #1
  36 001a 2574     		strb	r5, [r4, #16]
  37 001c 6070     		strb	r0, [r4, #1]
  38 001e DD77     		strb	r5, [r3, #31]
  39 0020 A561     		str	r5, [r4, #24]
  40 0022 E561     		str	r5, [r4, #28]
  41 0024 6662     		str	r6, [r4, #36]
  42 0026 70BD     		pop	{r4, r5, r6, pc}
  43              	.L3:
  44              		.align	2
  45              	.L2:
  46 0028 40FA0100 		.word	129600
  48              		.section	.text.clock_sync_is_enabled,"ax",%progbits
  49              		.align	1
  50              		.global	clock_sync_is_enabled
  51              		.syntax unified
  52              		.code	16
  53              		.thumb_func
  54              		.fpu softvfp
  56              	clock_sync_is_enabled:
  57              		@ args = 0, pretend = 0, frame = 0
  58              		@ frame_needed = 0, uses_anonymous_args = 0
  59              		@ link register save eliminated.
  60 0000 0078     		ldrb	r0, [r0]
ARM GAS  /tmp/cceent9q.s 			page 2


  61              		@ sp needed
  62 0002 7047     		bx	lr
  64              		.section	.text.clock_sync_get_alcsync_port,"ax",%progbits
  65              		.align	1
  66              		.global	clock_sync_get_alcsync_port
  67              		.syntax unified
  68              		.code	16
  69              		.thumb_func
  70              		.fpu softvfp
  72              	clock_sync_get_alcsync_port:
  73              		@ args = 0, pretend = 0, frame = 0
  74              		@ frame_needed = 0, uses_anonymous_args = 0
  75              		@ link register save eliminated.
  76 0000 4078     		ldrb	r0, [r0, #1]
  77              		@ sp needed
  78 0002 7047     		bx	lr
  80              		.section	.text.clock_sync_get_current_service,"ax",%progbits
  81              		.align	1
  82              		.global	clock_sync_get_current_service
  83              		.syntax unified
  84              		.code	16
  85              		.thumb_func
  86              		.fpu softvfp
  88              	clock_sync_get_current_service:
  89              		@ args = 0, pretend = 0, frame = 0
  90              		@ frame_needed = 0, uses_anonymous_args = 0
  91              		@ link register save eliminated.
  92 0000 007C     		ldrb	r0, [r0, #16]
  93              		@ sp needed
  94 0002 7047     		bx	lr
  96              		.section	.text.clock_sync_set_alcsync_port,"ax",%progbits
  97              		.align	1
  98              		.global	clock_sync_set_alcsync_port
  99              		.syntax unified
 100              		.code	16
 101              		.thumb_func
 102              		.fpu softvfp
 104              	clock_sync_set_alcsync_port:
 105              		@ args = 0, pretend = 0, frame = 0
 106              		@ frame_needed = 0, uses_anonymous_args = 0
 107              		@ link register save eliminated.
 108 0000 4A1E     		subs	r2, r1, #1
 109 0002 D2B2     		uxtb	r2, r2
 110 0004 0300     		movs	r3, r0
 111 0006 0120     		movs	r0, #1
 112 0008 DE2A     		cmp	r2, #222
 113 000a 01D8     		bhi	.L8
 114 000c 0020     		movs	r0, #0
 115 000e 5970     		strb	r1, [r3, #1]
 116              	.L8:
 117              		@ sp needed
 118 0010 7047     		bx	lr
 120              		.section	.text.clock_sync_set_gps_time,"ax",%progbits
 121              		.align	1
 122              		.global	clock_sync_set_gps_time
 123              		.syntax unified
 124              		.code	16
ARM GAS  /tmp/cceent9q.s 			page 3


 125              		.thumb_func
 126              		.fpu softvfp
 128              	clock_sync_set_gps_time:
 129              		@ args = 0, pretend = 0, frame = 0
 130              		@ frame_needed = 0, uses_anonymous_args = 0
 131 0000 70B5     		push	{r4, r5, r6, lr}
 132 0002 037C     		ldrb	r3, [r0, #16]
 133 0004 0400     		movs	r4, r0
 134 0006 0D00     		movs	r5, r1
 135 0008 002B     		cmp	r3, #0
 136 000a 08D1     		bne	.L11
 137 000c C361     		str	r3, [r0, #28]
 138 000e 8161     		str	r1, [r0, #24]
 139 0010 FFF7FEFF 		bl	smtc_modem_hal_get_time_in_s
 140 0014 0123     		movs	r3, #1
 141 0016 A060     		str	r0, [r4, #8]
 142 0018 0134     		adds	r4, r4, #1
 143 001a E377     		strb	r3, [r4, #31]
 144              	.L10:
 145              		@ sp needed
 146 001c 70BD     		pop	{r4, r5, r6, pc}
 147              	.L11:
 148 001e 446A     		ldr	r4, [r0, #36]
 149 0020 FFF7FEFF 		bl	smtc_modem_hal_get_time_in_s
 150 0024 291A     		subs	r1, r5, r0
 151 0026 2000     		movs	r0, r4
 152 0028 FFF7FEFF 		bl	alc_sync_set_time_correction_second
 153 002c F6E7     		b	.L10
 155              		.section	.text.clock_sync_is_done,"ax",%progbits
 156              		.align	1
 157              		.global	clock_sync_is_done
 158              		.syntax unified
 159              		.code	16
 160              		.thumb_func
 161              		.fpu softvfp
 163              	clock_sync_is_done:
 164              		@ args = 0, pretend = 0, frame = 0
 165              		@ frame_needed = 0, uses_anonymous_args = 0
 166 0000 10B5     		push	{r4, lr}
 167 0002 037C     		ldrb	r3, [r0, #16]
 168 0004 002B     		cmp	r3, #0
 169 0006 08D1     		bne	.L14
 170 0008 0121     		movs	r1, #1
 171 000a 0130     		adds	r0, r0, #1
 172 000c C27F     		ldrb	r2, [r0, #31]
 173 000e 013A     		subs	r2, r2, #1
 174 0010 D2B2     		uxtb	r2, r2
 175 0012 9142     		cmp	r1, r2
 176 0014 5B41     		adcs	r3, r3, r3
 177 0016 D8B2     		uxtb	r0, r3
 178              	.L15:
 179              		@ sp needed
 180 0018 10BD     		pop	{r4, pc}
 181              	.L14:
 182 001a 406A     		ldr	r0, [r0, #36]
 183 001c FFF7FEFF 		bl	is_alc_sync_done
 184 0020 FAE7     		b	.L15
ARM GAS  /tmp/cceent9q.s 			page 4


 186              		.section	.text.clock_sync_is_time_valid,"ax",%progbits
 187              		.align	1
 188              		.global	clock_sync_is_time_valid
 189              		.syntax unified
 190              		.code	16
 191              		.thumb_func
 192              		.fpu softvfp
 194              	clock_sync_is_time_valid:
 195              		@ args = 0, pretend = 0, frame = 0
 196              		@ frame_needed = 0, uses_anonymous_args = 0
 197 0000 70B5     		push	{r4, r5, r6, lr}
 198 0002 047C     		ldrb	r4, [r0, #16]
 199 0004 0500     		movs	r5, r0
 200 0006 002C     		cmp	r4, #0
 201 0008 10D1     		bne	.L17
 202 000a 431C     		adds	r3, r0, #1
 203 000c DB7F     		ldrb	r3, [r3, #31]
 204 000e 012B     		cmp	r3, #1
 205 0010 08D1     		bne	.L18
 206 0012 FFF7FEFF 		bl	smtc_modem_hal_get_time_in_s
 207 0016 AB68     		ldr	r3, [r5, #8]
 208 0018 002B     		cmp	r3, #0
 209 001a 01D0     		beq	.L19
 210 001c FFF7FEFF 		bl	lorawan_api_get_device_time_invalid_delay_s
 211              	.L19:
 212              		@ sp needed
 213 0020 2000     		movs	r0, r4
 214 0022 70BD     		pop	{r4, r5, r6, pc}
 215              	.L18:
 216 0024 FFF7FEFF 		bl	lorawan_api_is_time_valid
 217              	.L22:
 218 0028 0400     		movs	r4, r0
 219 002a F9E7     		b	.L19
 220              	.L17:
 221 002c 406A     		ldr	r0, [r0, #36]
 222 002e FFF7FEFF 		bl	is_alc_sync_time_valid
 223 0032 F9E7     		b	.L22
 225              		.section	.text.clock_sync_get_gps_time_second,"ax",%progbits
 226              		.align	1
 227              		.global	clock_sync_get_gps_time_second
 228              		.syntax unified
 229              		.code	16
 230              		.thumb_func
 231              		.fpu softvfp
 233              	clock_sync_get_gps_time_second:
 234              		@ args = 0, pretend = 0, frame = 0
 235              		@ frame_needed = 0, uses_anonymous_args = 0
 236 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 237 0002 431C     		adds	r3, r0, #1
 238 0004 DB7F     		ldrb	r3, [r3, #31]
 239 0006 0400     		movs	r4, r0
 240 0008 0F00     		movs	r7, r1
 241 000a 1600     		movs	r6, r2
 242 000c 012B     		cmp	r3, #1
 243 000e 0DD1     		bne	.L24
 244 0010 8569     		ldr	r5, [r0, #24]
 245 0012 FFF7FEFF 		bl	smtc_modem_hal_get_time_in_s
ARM GAS  /tmp/cceent9q.s 			page 5


 246 0016 A468     		ldr	r4, [r4, #8]
 247 0018 2C1B     		subs	r4, r5, r4
 248 001a 2418     		adds	r4, r4, r0
 249 001c FFF7FEFF 		bl	smtc_modem_hal_get_time_compensation_in_s
 250 0020 0025     		movs	r5, #0
 251 0022 0419     		adds	r4, r0, r4
 252 0024 3C60     		str	r4, [r7]
 253 0026 3560     		str	r5, [r6]
 254              	.L25:
 255 0028 2800     		movs	r0, r5
 256              		@ sp needed
 257 002a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 258              	.L24:
 259 002c 037C     		ldrb	r3, [r0, #16]
 260 002e 002B     		cmp	r3, #0
 261 0030 0DD1     		bne	.L26
 262 0032 FFF7FEFF 		bl	smtc_modem_hal_get_time_in_ms
 263 0036 2200     		movs	r2, r4
 264 0038 2100     		movs	r1, r4
 265 003a 1C32     		adds	r2, r2, #28
 266 003c 1831     		adds	r1, r1, #24
 267 003e FFF7FEFF 		bl	lorawan_api_convert_rtc_to_gps_epoch_time
 268 0042 0500     		movs	r5, r0
 269 0044 A369     		ldr	r3, [r4, #24]
 270 0046 3B60     		str	r3, [r7]
 271 0048 E369     		ldr	r3, [r4, #28]
 272              	.L27:
 273 004a 3360     		str	r3, [r6]
 274 004c ECE7     		b	.L25
 275              	.L26:
 276 004e FFF7FEFF 		bl	clock_sync_is_time_valid
 277 0052 0500     		movs	r5, r0
 278 0054 606A     		ldr	r0, [r4, #36]
 279 0056 FFF7FEFF 		bl	alc_sync_get_gps_time_second
 280 005a 0023     		movs	r3, #0
 281 005c 3860     		str	r0, [r7]
 282 005e F4E7     		b	.L27
 284              		.section	.text.clock_sync_set_sync_lost,"ax",%progbits
 285              		.align	1
 286              		.global	clock_sync_set_sync_lost
 287              		.syntax unified
 288              		.code	16
 289              		.thumb_func
 290              		.fpu softvfp
 292              	clock_sync_set_sync_lost:
 293              		@ args = 0, pretend = 0, frame = 0
 294              		@ frame_needed = 0, uses_anonymous_args = 0
 295 0000 10B5     		push	{r4, lr}
 296 0002 037C     		ldrb	r3, [r0, #16]
 297 0004 002B     		cmp	r3, #0
 298 0006 03D1     		bne	.L29
 299 0008 421C     		adds	r2, r0, #1
 300 000a D377     		strb	r3, [r2, #31]
 301 000c 8360     		str	r3, [r0, #8]
 302              	.L28:
 303              		@ sp needed
 304 000e 10BD     		pop	{r4, pc}
ARM GAS  /tmp/cceent9q.s 			page 6


 305              	.L29:
 306 0010 406A     		ldr	r0, [r0, #36]
 307 0012 FFF7FEFF 		bl	alc_sync_set_sync_lost
 308 0016 FAE7     		b	.L28
 310              		.section	.text.clock_sync_get_interval_second,"ax",%progbits
 311              		.align	1
 312              		.global	clock_sync_get_interval_second
 313              		.syntax unified
 314              		.code	16
 315              		.thumb_func
 316              		.fpu softvfp
 318              	clock_sync_get_interval_second:
 319              		@ args = 0, pretend = 0, frame = 0
 320              		@ frame_needed = 0, uses_anonymous_args = 0
 321 0000 10B5     		push	{r4, lr}
 322 0002 037C     		ldrb	r3, [r0, #16]
 323 0004 002B     		cmp	r3, #0
 324 0006 01D1     		bne	.L32
 325 0008 4068     		ldr	r0, [r0, #4]
 326              	.L31:
 327              		@ sp needed
 328 000a 10BD     		pop	{r4, pc}
 329              	.L32:
 330 000c 406A     		ldr	r0, [r0, #36]
 331 000e FFF7FEFF 		bl	alc_sync_get_interval_second
 332 0012 FAE7     		b	.L31
 334              		.section	.text.clock_sync_set_interval_second,"ax",%progbits
 335              		.align	1
 336              		.global	clock_sync_set_interval_second
 337              		.syntax unified
 338              		.code	16
 339              		.thumb_func
 340              		.fpu softvfp
 342              	clock_sync_set_interval_second:
 343              		@ args = 0, pretend = 0, frame = 0
 344              		@ frame_needed = 0, uses_anonymous_args = 0
 345 0000 70B5     		push	{r4, r5, r6, lr}
 346 0002 0500     		movs	r5, r0
 347 0004 0C00     		movs	r4, r1
 348 0006 FFF7FEFF 		bl	lorawan_api_get_device_time_invalid_delay_s
 349 000a 0126     		movs	r6, #1
 350 000c A042     		cmp	r0, r4
 351 000e 01D9     		bls	.L35
 352 0010 0026     		movs	r6, #0
 353 0012 6C60     		str	r4, [r5, #4]
 354              	.L35:
 355 0014 2100     		movs	r1, r4
 356 0016 686A     		ldr	r0, [r5, #36]
 357 0018 FFF7FEFF 		bl	alc_sync_set_interval_second
 358 001c 0028     		cmp	r0, #0
 359 001e 00D1     		bne	.L36
 360 0020 0126     		movs	r6, #1
 361              	.L36:
 362              		@ sp needed
 363 0022 3000     		movs	r0, r6
 364 0024 70BD     		pop	{r4, r5, r6, pc}
 366              		.section	.text.clock_sync_set_invalid_time_delay_s,"ax",%progbits
ARM GAS  /tmp/cceent9q.s 			page 7


 367              		.align	1
 368              		.global	clock_sync_set_invalid_time_delay_s
 369              		.syntax unified
 370              		.code	16
 371              		.thumb_func
 372              		.fpu softvfp
 374              	clock_sync_set_invalid_time_delay_s:
 375              		@ args = 0, pretend = 0, frame = 0
 376              		@ frame_needed = 0, uses_anonymous_args = 0
 377 0000 0C4B     		ldr	r3, .L44
 378 0002 70B5     		push	{r4, r5, r6, lr}
 379 0004 0600     		movs	r6, r0
 380 0006 0D00     		movs	r5, r1
 381 0008 9942     		cmp	r1, r3
 382 000a 11D8     		bhi	.L39
 383 000c FFF7FEFF 		bl	clock_sync_get_interval_second
 384 0010 A842     		cmp	r0, r5
 385 0012 0DD2     		bcs	.L39
 386 0014 2800     		movs	r0, r5
 387 0016 FFF7FEFF 		bl	lorawan_api_set_device_time_invalid_delay_s
 388 001a 2900     		movs	r1, r5
 389 001c 0400     		movs	r4, r0
 390 001e 706A     		ldr	r0, [r6, #36]
 391 0020 FFF7FEFF 		bl	alc_sync_set_valid_delay_second
 392 0024 0028     		cmp	r0, #0
 393 0026 03D0     		beq	.L39
 394 0028 631E     		subs	r3, r4, #1
 395 002a 9C41     		sbcs	r4, r4, r3
 396 002c E0B2     		uxtb	r0, r4
 397              	.L40:
 398              		@ sp needed
 399 002e 70BD     		pop	{r4, r5, r6, pc}
 400              	.L39:
 401 0030 0120     		movs	r0, #1
 402 0032 FCE7     		b	.L40
 403              	.L45:
 404              		.align	2
 405              	.L44:
 406 0034 80994000 		.word	4233600
 408              		.section	.text.clock_sync_get_invalid_time_delay_s,"ax",%progbits
 409              		.align	1
 410              		.global	clock_sync_get_invalid_time_delay_s
 411              		.syntax unified
 412              		.code	16
 413              		.thumb_func
 414              		.fpu softvfp
 416              	clock_sync_get_invalid_time_delay_s:
 417              		@ args = 0, pretend = 0, frame = 0
 418              		@ frame_needed = 0, uses_anonymous_args = 0
 419 0000 10B5     		push	{r4, lr}
 420 0002 037C     		ldrb	r3, [r0, #16]
 421 0004 002B     		cmp	r3, #0
 422 0006 02D1     		bne	.L47
 423 0008 FFF7FEFF 		bl	lorawan_api_get_device_time_invalid_delay_s
 424              	.L46:
 425              		@ sp needed
 426 000c 10BD     		pop	{r4, pc}
ARM GAS  /tmp/cceent9q.s 			page 8


 427              	.L47:
 428 000e 406A     		ldr	r0, [r0, #36]
 429 0010 FFF7FEFF 		bl	alc_sync_get_valid_delay_second
 430 0014 FAE7     		b	.L46
 432              		.section	.text.clock_sync_reset_nb_time_req,"ax",%progbits
 433              		.align	1
 434              		.global	clock_sync_reset_nb_time_req
 435              		.syntax unified
 436              		.code	16
 437              		.thumb_func
 438              		.fpu softvfp
 440              	clock_sync_reset_nb_time_req:
 441              		@ args = 0, pretend = 0, frame = 0
 442              		@ frame_needed = 0, uses_anonymous_args = 0
 443              		@ link register save eliminated.
 444 0000 0023     		movs	r3, #0
 445              		@ sp needed
 446 0002 C360     		str	r3, [r0, #12]
 447 0004 7047     		bx	lr
 449              		.section	.text.clock_sync_get_time_left_connection_lost,"ax",%progbits
 450              		.align	1
 451              		.global	clock_sync_get_time_left_connection_lost
 452              		.syntax unified
 453              		.code	16
 454              		.thumb_func
 455              		.fpu softvfp
 457              	clock_sync_get_time_left_connection_lost:
 458              		@ args = 0, pretend = 0, frame = 0
 459              		@ frame_needed = 0, uses_anonymous_args = 0
 460 0000 10B5     		push	{r4, lr}
 461 0002 037C     		ldrb	r3, [r0, #16]
 462 0004 002B     		cmp	r3, #0
 463 0006 02D1     		bne	.L51
 464 0008 FFF7FEFF 		bl	lorawan_api_get_time_left_connection_lost
 465              	.L50:
 466              		@ sp needed
 467 000c 10BD     		pop	{r4, pc}
 468              	.L51:
 469 000e 406A     		ldr	r0, [r0, #36]
 470 0010 FFF7FEFF 		bl	alc_sync_get_time_left_connection_lost
 471 0014 FAE7     		b	.L50
 473              		.section	.text.clock_sync_callback,"ax",%progbits
 474              		.align	1
 475              		.global	clock_sync_callback
 476              		.syntax unified
 477              		.code	16
 478              		.thumb_func
 479              		.fpu softvfp
 481              	clock_sync_callback:
 482              		@ args = 0, pretend = 0, frame = 0
 483              		@ frame_needed = 0, uses_anonymous_args = 0
 484 0000 70B5     		push	{r4, r5, r6, lr}
 485 0002 037C     		ldrb	r3, [r0, #16]
 486 0004 0500     		movs	r5, r0
 487 0006 002B     		cmp	r3, #0
 488 0008 05D1     		bne	.L54
 489 000a FFF7FEFF 		bl	lorawan_api_get_timestamp_last_device_time_ans_s
ARM GAS  /tmp/cceent9q.s 			page 9


 490 000e 0222     		movs	r2, #2
 491 0010 6B1C     		adds	r3, r5, #1
 492 0012 A860     		str	r0, [r5, #8]
 493 0014 DA77     		strb	r2, [r3, #31]
 494              	.L54:
 495 0016 2800     		movs	r0, r5
 496 0018 FFF7FEFF 		bl	clock_sync_is_done
 497 001c 0028     		cmp	r0, #0
 498 001e 49D0     		beq	.L55
 499 0020 2800     		movs	r0, r5
 500 0022 FFF7FEFF 		bl	clock_sync_is_time_valid
 501 0026 011E     		subs	r1, r0, #0
 502 0028 12D1     		bne	.L56
 503 002a 0D20     		movs	r0, #13
 504 002c FFF7FEFF 		bl	increment_asynchronous_msgnumber
 505 0030 2800     		movs	r0, r5
 506 0032 FFF7FEFF 		bl	clock_sync_set_sync_lost
 507 0036 0123     		movs	r3, #1
 508 0038 EB60     		str	r3, [r5, #12]
 509              	.L83:
 510 003a 2800     		movs	r0, r5
 511 003c FFF7FEFF 		bl	clock_sync_get_interval_second
 512 0040 8024     		movs	r4, #128
 513 0042 8028     		cmp	r0, #128
 514 0044 15D8     		bhi	.L58
 515              	.L82:
 516 0046 2800     		movs	r0, r5
 517 0048 FFF7FEFF 		bl	clock_sync_get_interval_second
 518 004c 0400     		movs	r4, r0
 519 004e 10E0     		b	.L58
 520              	.L56:
 521 0050 297C     		ldrb	r1, [r5, #16]
 522 0052 0129     		cmp	r1, #1
 523 0054 28D1     		bne	.L59
 524 0056 6B6A     		ldr	r3, [r5, #36]
 525 0058 2933     		adds	r3, r3, #41
 526 005a 1B78     		ldrb	r3, [r3]
 527 005c 002B     		cmp	r3, #0
 528 005e 00D1     		bne	.L81
 529              	.L80:
 530 0060 0131     		adds	r1, r1, #1
 531              	.L81:
 532 0062 0D20     		movs	r0, #13
 533 0064 FFF7FEFF 		bl	increment_asynchronous_msgnumber
 534 0068 2800     		movs	r0, r5
 535 006a FFF7FEFF 		bl	clock_sync_get_interval_second
 536 006e 041E     		subs	r4, r0, #0
 537 0070 E9D1     		bne	.L82
 538              	.L58:
 539 0072 2800     		movs	r0, r5
 540 0074 FFF7FEFF 		bl	clock_sync_get_time_left_connection_lost
 541 0078 A042     		cmp	r0, r4
 542 007a 03D8     		bhi	.L66
 543 007c 2800     		movs	r0, r5
 544 007e FFF7FEFF 		bl	clock_sync_get_time_left_connection_lost
 545 0082 0400     		movs	r4, r0
 546              	.L66:
ARM GAS  /tmp/cceent9q.s 			page 10


 547 0084 2B78     		ldrb	r3, [r5]
 548 0086 002B     		cmp	r3, #0
 549 0088 0DD0     		beq	.L53
 550 008a 1E25     		movs	r5, #30
 551 008c 6D42     		rsbs	r5, r5, #0
 552              	.L69:
 553 008e 1E21     		movs	r1, #30
 554 0090 2800     		movs	r0, r5
 555 0092 FFF7FEFF 		bl	smtc_modem_hal_get_signed_random_nb_in_range
 556 0096 0028     		cmp	r0, #0
 557 0098 02DA     		bge	.L68
 558 009a 4342     		rsbs	r3, r0, #0
 559 009c A342     		cmp	r3, r4
 560 009e F6D8     		bhi	.L69
 561              	.L68:
 562 00a0 0019     		adds	r0, r0, r4
 563 00a2 FFF7FEFF 		bl	modem_supervisor_add_task_clock_sync_time_req
 564              	.L53:
 565              		@ sp needed
 566 00a6 70BD     		pop	{r4, r5, r6, pc}
 567              	.L59:
 568 00a8 FFF7FEFF 		bl	lorawan_api_get_device_time_req_status
 569 00ac 0100     		movs	r1, r0
 570 00ae 4B1E     		subs	r3, r1, #1
 571 00b0 9941     		sbcs	r1, r1, r3
 572 00b2 D5E7     		b	.L80
 573              	.L55:
 574 00b4 EB68     		ldr	r3, [r5, #12]
 575 00b6 022B     		cmp	r3, #2
 576 00b8 BFD9     		bls	.L83
 577 00ba 2800     		movs	r0, r5
 578 00bc 082B     		cmp	r3, #8
 579 00be 07D8     		bhi	.L65
 580 00c0 FFF7FEFF 		bl	clock_sync_get_interval_second
 581 00c4 E123     		movs	r3, #225
 582 00c6 9B01     		lsls	r3, r3, #6
 583              	.L85:
 584 00c8 1C00     		movs	r4, r3
 585 00ca 9842     		cmp	r0, r3
 586 00cc D1D8     		bhi	.L58
 587 00ce BAE7     		b	.L82
 588              	.L65:
 589 00d0 FFF7FEFF 		bl	clock_sync_get_interval_second
 590 00d4 004B     		ldr	r3, .L86
 591 00d6 F7E7     		b	.L85
 592              	.L87:
 593              		.align	2
 594              	.L86:
 595 00d8 40FA0100 		.word	129600
 597              		.section	.text.clock_sync_request,"ax",%progbits
 598              		.align	1
 599              		.global	clock_sync_request
 600              		.syntax unified
 601              		.code	16
 602              		.thumb_func
 603              		.fpu softvfp
 605              	clock_sync_request:
ARM GAS  /tmp/cceent9q.s 			page 11


 606              		@ args = 0, pretend = 0, frame = 40
 607              		@ frame_needed = 0, uses_anonymous_args = 0
 608 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 609 0002 037C     		ldrb	r3, [r0, #16]
 610 0004 0400     		movs	r4, r0
 611 0006 8FB0     		sub	sp, sp, #60
 612 0008 002B     		cmp	r3, #0
 613 000a 0CD1     		bne	.L89
 614 000c 0D20     		movs	r0, #13
 615 000e FFF7FEFF 		bl	lorawan_api_send_stack_cid_req
 616 0012 0300     		movs	r3, r0
 617              	.L90:
 618 0014 0120     		movs	r0, #1
 619 0016 002B     		cmp	r3, #0
 620 0018 03D1     		bne	.L94
 621 001a E268     		ldr	r2, [r4, #12]
 622 001c 1218     		adds	r2, r2, r0
 623 001e 1800     		movs	r0, r3
 624 0020 E260     		str	r2, [r4, #12]
 625              	.L94:
 626 0022 0FB0     		add	sp, sp, #60
 627              		@ sp needed
 628 0024 F0BD     		pop	{r4, r5, r6, r7, pc}
 629              	.L89:
 630 0026 FFF7FEFF 		bl	lorawan_api_next_max_payload_length_get
 631 002a C3B2     		uxtb	r3, r0
 632 002c 0793     		str	r3, [sp, #28]
 633 002e 1723     		movs	r3, #23
 634 0030 0025     		movs	r5, #0
 635 0032 04AA     		add	r2, sp, #16
 636 0034 9B18     		adds	r3, r3, r2
 637 0036 1D70     		strb	r5, [r3]
 638 0038 FFF7FEFF 		bl	smtc_modem_hal_get_time_in_s
 639 003c 0321     		movs	r1, #3
 640 003e 0600     		movs	r6, r0
 641 0040 0120     		movs	r0, #1
 642 0042 FFF7FEFF 		bl	smtc_modem_hal_get_random_nb_in_range
 643 0046 3318     		adds	r3, r6, r0
 644 0048 2000     		movs	r0, r4
 645 004a 0593     		str	r3, [sp, #20]
 646 004c FFF7FEFF 		bl	clock_sync_is_done
 647 0050 0127     		movs	r7, #1
 648 0052 A842     		cmp	r0, r5
 649 0054 10D0     		beq	.L91
 650 0056 2000     		movs	r0, r4
 651 0058 FFF7FEFF 		bl	clock_sync_is_done
 652 005c 2F00     		movs	r7, r5
 653 005e A842     		cmp	r0, r5
 654 0060 0AD0     		beq	.L91
 655 0062 FFF7FEFF 		bl	smtc_modem_hal_get_time_in_s
 656 0066 0700     		movs	r7, r0
 657 0068 606A     		ldr	r0, [r4, #36]
 658 006a FFF7FEFF 		bl	alc_sync_get_timestamp_last_correction_s
 659 006e 381A     		subs	r0, r7, r0
 660 0070 1F4F     		ldr	r7, .L101
 661 0072 8742     		cmp	r7, r0
 662 0074 BF41     		sbcs	r7, r7, r7
ARM GAS  /tmp/cceent9q.s 			page 12


 663 0076 7F42     		rsbs	r7, r7, #0
 664              	.L91:
 665 0078 FFF7FEFF 		bl	get_modem_dm_port
 666 007c 6378     		ldrb	r3, [r4, #1]
 667 007e 0025     		movs	r5, #0
 668 0080 8342     		cmp	r3, r0
 669 0082 03D1     		bne	.L92
 670 0084 1722     		movs	r2, #23
 671 0086 0AAB     		add	r3, sp, #40
 672 0088 1A70     		strb	r2, [r3]
 673 008a 0135     		adds	r5, r5, #1
 674              	.L92:
 675 008c 636A     		ldr	r3, [r4, #36]
 676 008e 0693     		str	r3, [sp, #24]
 677 0090 FFF7FEFF 		bl	smtc_modem_hal_get_time_compensation_in_s
 678 0094 0600     		movs	r6, r0
 679 0096 606A     		ldr	r0, [r4, #36]
 680 0098 FFF7FEFF 		bl	alc_sync_get_time_correction_second
 681 009c 3118     		adds	r1, r6, r0
 682 009e 1726     		movs	r6, #23
 683 00a0 059B     		ldr	r3, [sp, #20]
 684 00a2 0698     		ldr	r0, [sp, #24]
 685 00a4 C918     		adds	r1, r1, r3
 686 00a6 04AB     		add	r3, sp, #16
 687 00a8 F618     		adds	r6, r6, r3
 688 00aa 0AAB     		add	r3, sp, #40
 689 00ac 5B19     		adds	r3, r3, r5
 690 00ae 0193     		str	r3, [sp, #4]
 691 00b0 079B     		ldr	r3, [sp, #28]
 692 00b2 3A00     		movs	r2, r7
 693 00b4 0093     		str	r3, [sp]
 694 00b6 0296     		str	r6, [sp, #8]
 695 00b8 0023     		movs	r3, #0
 696 00ba FFF7FEFF 		bl	alc_sync_create_uplink_payload
 697 00be 3378     		ldrb	r3, [r6]
 698 00c0 0120     		movs	r0, #1
 699 00c2 EB18     		adds	r3, r5, r3
 700 00c4 DBB2     		uxtb	r3, r3
 701 00c6 3370     		strb	r3, [r6]
 702 00c8 002B     		cmp	r3, #0
 703 00ca AAD0     		beq	.L94
 704 00cc FA22     		movs	r2, #250
 705 00ce 0599     		ldr	r1, [sp, #20]
 706 00d0 9200     		lsls	r2, r2, #2
 707 00d2 4A43     		muls	r2, r1
 708 00d4 0192     		str	r2, [sp, #4]
 709 00d6 0222     		movs	r2, #2
 710 00d8 0121     		movs	r1, #1
 711 00da 0092     		str	r2, [sp]
 712 00dc 6078     		ldrb	r0, [r4, #1]
 713 00de 0AAA     		add	r2, sp, #40
 714 00e0 FFF7FEFF 		bl	lorawan_api_payload_send_at_time
 715 00e4 0021     		movs	r1, #0
 716 00e6 626A     		ldr	r2, [r4, #36]
 717 00e8 0300     		movs	r3, r0
 718 00ea 2932     		adds	r2, r2, #41
 719 00ec 1170     		strb	r1, [r2]
ARM GAS  /tmp/cceent9q.s 			page 13


 720 00ee 91E7     		b	.L90
 721              	.L102:
 722              		.align	2
 723              	.L101:
 724 00f0 C04C2000 		.word	2116800
 726              		.section	.text.clock_sync_reset,"ax",%progbits
 727              		.align	1
 728              		.global	clock_sync_reset
 729              		.syntax unified
 730              		.code	16
 731              		.thumb_func
 732              		.fpu softvfp
 734              	clock_sync_reset:
 735              		@ args = 0, pretend = 0, frame = 0
 736              		@ frame_needed = 0, uses_anonymous_args = 0
 737              		@ link register save eliminated.
 738 0000 0023     		movs	r3, #0
 739              		@ sp needed
 740 0002 421C     		adds	r2, r0, #1
 741 0004 4361     		str	r3, [r0, #20]
 742 0006 8360     		str	r3, [r0, #8]
 743 0008 C360     		str	r3, [r0, #12]
 744 000a D377     		strb	r3, [r2, #31]
 745 000c 8361     		str	r3, [r0, #24]
 746 000e C361     		str	r3, [r0, #28]
 747 0010 7047     		bx	lr
 749              		.section	.text.clock_sync_set_enabled,"ax",%progbits
 750              		.align	1
 751              		.global	clock_sync_set_enabled
 752              		.syntax unified
 753              		.code	16
 754              		.thumb_func
 755              		.fpu softvfp
 757              	clock_sync_set_enabled:
 758              		@ args = 0, pretend = 0, frame = 0
 759              		@ frame_needed = 0, uses_anonymous_args = 0
 760 0000 70B5     		push	{r4, r5, r6, lr}
 761 0002 0400     		movs	r4, r0
 762              		@ sp needed
 763 0004 0E00     		movs	r6, r1
 764 0006 1500     		movs	r5, r2
 765 0008 FFF7FEFF 		bl	clock_sync_reset
 766 000c 2670     		strb	r6, [r4]
 767 000e 2574     		strb	r5, [r4, #16]
 768 0010 70BD     		pop	{r4, r5, r6, pc}
 770              		.ident	"GCC: (15:10.3-2021.07-4) 10.3.1 20210621 (release)"
ARM GAS  /tmp/cceent9q.s 			page 14


DEFINED SYMBOLS
                            *ABS*:0000000000000000 smtc_clock_sync.c
     /tmp/cceent9q.s:12     .text.clock_sync_init:0000000000000000 $t
     /tmp/cceent9q.s:20     .text.clock_sync_init:0000000000000000 clock_sync_init
     /tmp/cceent9q.s:46     .text.clock_sync_init:0000000000000028 $d
     /tmp/cceent9q.s:49     .text.clock_sync_is_enabled:0000000000000000 $t
     /tmp/cceent9q.s:56     .text.clock_sync_is_enabled:0000000000000000 clock_sync_is_enabled
     /tmp/cceent9q.s:65     .text.clock_sync_get_alcsync_port:0000000000000000 $t
     /tmp/cceent9q.s:72     .text.clock_sync_get_alcsync_port:0000000000000000 clock_sync_get_alcsync_port
     /tmp/cceent9q.s:81     .text.clock_sync_get_current_service:0000000000000000 $t
     /tmp/cceent9q.s:88     .text.clock_sync_get_current_service:0000000000000000 clock_sync_get_current_service
     /tmp/cceent9q.s:97     .text.clock_sync_set_alcsync_port:0000000000000000 $t
     /tmp/cceent9q.s:104    .text.clock_sync_set_alcsync_port:0000000000000000 clock_sync_set_alcsync_port
     /tmp/cceent9q.s:121    .text.clock_sync_set_gps_time:0000000000000000 $t
     /tmp/cceent9q.s:128    .text.clock_sync_set_gps_time:0000000000000000 clock_sync_set_gps_time
     /tmp/cceent9q.s:156    .text.clock_sync_is_done:0000000000000000 $t
     /tmp/cceent9q.s:163    .text.clock_sync_is_done:0000000000000000 clock_sync_is_done
     /tmp/cceent9q.s:187    .text.clock_sync_is_time_valid:0000000000000000 $t
     /tmp/cceent9q.s:194    .text.clock_sync_is_time_valid:0000000000000000 clock_sync_is_time_valid
     /tmp/cceent9q.s:226    .text.clock_sync_get_gps_time_second:0000000000000000 $t
     /tmp/cceent9q.s:233    .text.clock_sync_get_gps_time_second:0000000000000000 clock_sync_get_gps_time_second
     /tmp/cceent9q.s:285    .text.clock_sync_set_sync_lost:0000000000000000 $t
     /tmp/cceent9q.s:292    .text.clock_sync_set_sync_lost:0000000000000000 clock_sync_set_sync_lost
     /tmp/cceent9q.s:311    .text.clock_sync_get_interval_second:0000000000000000 $t
     /tmp/cceent9q.s:318    .text.clock_sync_get_interval_second:0000000000000000 clock_sync_get_interval_second
     /tmp/cceent9q.s:335    .text.clock_sync_set_interval_second:0000000000000000 $t
     /tmp/cceent9q.s:342    .text.clock_sync_set_interval_second:0000000000000000 clock_sync_set_interval_second
     /tmp/cceent9q.s:367    .text.clock_sync_set_invalid_time_delay_s:0000000000000000 $t
     /tmp/cceent9q.s:374    .text.clock_sync_set_invalid_time_delay_s:0000000000000000 clock_sync_set_invalid_time_delay_s
     /tmp/cceent9q.s:406    .text.clock_sync_set_invalid_time_delay_s:0000000000000034 $d
     /tmp/cceent9q.s:409    .text.clock_sync_get_invalid_time_delay_s:0000000000000000 $t
     /tmp/cceent9q.s:416    .text.clock_sync_get_invalid_time_delay_s:0000000000000000 clock_sync_get_invalid_time_delay_s
     /tmp/cceent9q.s:433    .text.clock_sync_reset_nb_time_req:0000000000000000 $t
     /tmp/cceent9q.s:440    .text.clock_sync_reset_nb_time_req:0000000000000000 clock_sync_reset_nb_time_req
     /tmp/cceent9q.s:450    .text.clock_sync_get_time_left_connection_lost:0000000000000000 $t
     /tmp/cceent9q.s:457    .text.clock_sync_get_time_left_connection_lost:0000000000000000 clock_sync_get_time_left_connection_lost
     /tmp/cceent9q.s:474    .text.clock_sync_callback:0000000000000000 $t
     /tmp/cceent9q.s:481    .text.clock_sync_callback:0000000000000000 clock_sync_callback
     /tmp/cceent9q.s:595    .text.clock_sync_callback:00000000000000d8 $d
     /tmp/cceent9q.s:598    .text.clock_sync_request:0000000000000000 $t
     /tmp/cceent9q.s:605    .text.clock_sync_request:0000000000000000 clock_sync_request
     /tmp/cceent9q.s:724    .text.clock_sync_request:00000000000000f0 $d
     /tmp/cceent9q.s:727    .text.clock_sync_reset:0000000000000000 $t
     /tmp/cceent9q.s:734    .text.clock_sync_reset:0000000000000000 clock_sync_reset
     /tmp/cceent9q.s:750    .text.clock_sync_set_enabled:0000000000000000 $t
     /tmp/cceent9q.s:757    .text.clock_sync_set_enabled:0000000000000000 clock_sync_set_enabled

UNDEFINED SYMBOLS
get_modem_dm_port
smtc_modem_hal_get_time_in_s
alc_sync_set_time_correction_second
is_alc_sync_done
lorawan_api_get_device_time_invalid_delay_s
lorawan_api_is_time_valid
is_alc_sync_time_valid
smtc_modem_hal_get_time_compensation_in_s
smtc_modem_hal_get_time_in_ms
ARM GAS  /tmp/cceent9q.s 			page 15


lorawan_api_convert_rtc_to_gps_epoch_time
alc_sync_get_gps_time_second
alc_sync_set_sync_lost
alc_sync_get_interval_second
alc_sync_set_interval_second
lorawan_api_set_device_time_invalid_delay_s
alc_sync_set_valid_delay_second
alc_sync_get_valid_delay_second
lorawan_api_get_time_left_connection_lost
alc_sync_get_time_left_connection_lost
lorawan_api_get_timestamp_last_device_time_ans_s
increment_asynchronous_msgnumber
smtc_modem_hal_get_signed_random_nb_in_range
modem_supervisor_add_task_clock_sync_time_req
lorawan_api_get_device_time_req_status
lorawan_api_send_stack_cid_req
lorawan_api_next_max_payload_length_get
smtc_modem_hal_get_random_nb_in_range
alc_sync_get_timestamp_last_correction_s
alc_sync_get_time_correction_second
alc_sync_create_uplink_payload
lorawan_api_payload_send_at_time
